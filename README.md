# RegimeMaker 🏋️

Приложение для планирования тренировочного режима с социальными функциями.
Создавайте тренировочные циклы, отслеживайте ежедневные упражнения, анализируйте
нагрузку на мышцы, публикуйте тренировки и подписывайтесь на других пользователей.

## Архитектура

| Компонент | Стек | Описание |
|-----------|------|----------|
| **API** | FastAPI + SQLAlchemy + SQLite | REST-бэкенд |
| **WEB** | React + Vite | SPA-интерфейс в стиле Instagram |

```
regime-maker/
├── API/
│   ├── web.py              # FastAPI эндпоинты
│   ├── schemas.py          # Pydantic-схемы валидации
│   ├── auth.py             # Хеширование паролей и аутентификация
│   ├── data/
│   │   ├── db_session.py   # Управление сессиями БД
│   │   ├── users.py        # Модель пользователя
│   │   ├── cycles.py       # Модель тренировочного цикла
│   │   ├── notes.py        # Модель заметки
│   │   ├── follows.py      # Модель подписки
│   │   ├── likes.py        # Модель лайка
│   │   └── muscles.py      # Конфигурация мышечных групп
│   ├── db/
│   │   └── exercises.json  # База упражнений (22 шт.)
│   └── tests/
├── WEB/
│   ├── index.html
│   ├── package.json
│   ├── vite.config.js          # Vite + прокси /api → :8001
│   └── src/
│       ├── main.jsx             # Точка входа React
│       ├── App.jsx              # Маршрутизация
│       ├── App.css              # Instagram-стиль
│       ├── api.js               # HTTP-клиент
│       ├── context/AuthContext.jsx
│       ├── components/          # Layout, WorkoutCard
│       └── pages/               # Feed, Explore, Create, Day, Profile...
├── start.sh                # Скрипт запуска всех сервисов
├── .env.example
└── .gitignore
```

## Возможности

### Основные

- **Регистрация и вход** — аутентификация с хешированием паролей (bcrypt)
- **Тренировочные циклы** — многодневные программы с упражнениями, подходами и днями отдыха
- **День** — задачи на любую дату, отметка выполнения
- **Анализ нагрузки** — распределение нагрузки по 13 мышечным группам
- **Заметки** — личные заметки для отслеживания прогресса
- **База упражнений** — 22 упражнения с коэффициентами нагрузки
- **FAQ** — встроенная база знаний о тренировках

### Социальные

- **Публикация тренировок** — делайте свои циклы публичными
- **Профили** — просмотр профилей со статистикой (циклы, подписчики, лайки)
- **Подписки** — подписывайтесь на других пользователей
- **Лайки** — ставьте лайки на публичные тренировки
- **Лента** — публикации от пользователей, на которых вы подписаны
- **Поиск** — поиск публичных тренировок со статистикой

## Быстрый старт

### 1. Клонирование и настройка

```bash
git clone https://github.com/darsavelidze/regime-maker.git
cd regime-maker
python3 -m venv venv
source venv/bin/activate
```

### 2. Установка зависимостей

```bash
pip install -r API/requirements.txt
cd WEB && npm install && cd ..
```

### 3. Запуск

```bash
./start.sh
```

Или вручную:

```bash
# Терминал 1 — API
cd API && python3 web.py

# Терминал 2 — WEB
cd WEB && npx vite --port 8000
```

- API: `http://127.0.0.1:8001`
- WEB: `http://127.0.0.1:8000`

## API-эндпоинты

### Аутентификация

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| GET | `/` | Проверка работоспособности |
| POST | `/user/` | Проверка учётных данных |
| POST | `/sign_up/` | Регистрация нового пользователя |

### Тренировки

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| POST | `/create_cycle/` | Создать тренировочный цикл |
| POST | `/delete_cycle/` | Удалить цикл |
| POST | `/user_cycles/` | Получить циклы пользователя |
| POST | `/day/` | Получить задачи на дату |
| POST | `/duty/` | Отметить выполнение задачи |

### Заметки

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| POST | `/create_note/` | Создать заметку |
| POST | `/get_notes/` | Получить заметки |
| POST | `/delete_note/` | Удалить заметку |

### Аналитика

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| POST | `/analytics/` | Анализ мышечной нагрузки цикла |
| POST | `/get_exercises/` | Получить все упражнения |

### Социальные функции

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| POST | `/publish_cycle/` | Опубликовать тренировку |
| POST | `/unpublish_cycle/` | Снять с публикации |
| POST | `/follow/` | Подписаться на пользователя |
| POST | `/unfollow/` | Отписаться |
| GET | `/followers/{username}/` | Список подписчиков |
| GET | `/following/{username}/` | Список подписок |
| POST | `/like_cycle/` | Поставить лайк |
| POST | `/unlike_cycle/` | Убрать лайк |
| POST | `/feed/` | Лента подписок |
| POST | `/search_cycles/` | Поиск публичных тренировок |
| GET | `/profile/{username}/` | Профиль пользователя |
| POST | `/update_profile/` | Обновить профиль (bio) |

## Система аналитики

Движок рассчитывает недельную нагрузку по формуле:

**подходы × коэффициент нагрузки × (7 / дней в цикле)**

Сравнение с оптимальным недельным объёмом:

- 🟢 **Оптимально** (80–130%)
- 🟠 **Средне** (40–80%)
- 🟡 **Недогруз** (10–40%)
- 🔴 **Перегрузка** (>130%)
- ⚪ **Не тренируется** (<10%)

## Стек технологий

- **Python 3.10+**
- **FastAPI** — асинхронный API с Pydantic-валидацией
- **SQLAlchemy** — ORM с SQLite
- **React 18** — SPA-интерфейс
- **Vite** — сборщик с HMR и прокси
- **React Router 6** — клиентская маршрутизация
- **passlib + bcrypt** — хеширование паролей
